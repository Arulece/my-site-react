#!/bin/sh

# Color codes for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo "${YELLOW}ğŸ” Running pre-commit checks...${NC}"
echo ""

# Run linting
echo "${YELLOW}ğŸ“‹ Running ESLint...${NC}"
npm run lint 2>&1
if [ $? -ne 0 ]; then
  echo ""
  echo "${RED}âŒ Linting failed! Please fix the errors above.${NC}"
  echo "${YELLOW}ğŸ’¡ Tip: Run 'npm run lint:fix' to auto-fix formatting issues.${NC}"
  exit 1
fi
echo "${GREEN}âœ“ Linting passed!${NC}"
echo ""

# Run tests
echo "${YELLOW}ğŸ§ª Running tests...${NC}"
npm test -- --passWithNoTests 2>&1
if [ $? -ne 0 ]; then
  echo ""
  echo "${RED}âŒ Tests failed! Please fix the failing tests.${NC}"
  echo "${YELLOW}ğŸ’¡ Tip: Run 'npm test' to see detailed error messages.${NC}"
  exit 1
fi
echo "${GREEN}âœ“ Tests passed!${NC}"
echo ""

echo "${GREEN}âœ… All checks passed! Proceeding with commit...${NC}"
exit 0
